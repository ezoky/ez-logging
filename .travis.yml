dist: focal
language: scala
env:
  matrix:
    - JDK=openjdk8
  global:
    - secure: KCBxDuUIrOYwNkNAUPEnDTysRg2c6ABa9g3ziZqimKCeQ/qxFbpezOJN1mc56BL5yhO1kS6hcNuzUZO7Fg+e1+/zv+sjVnb0GW3WIYNRzfvU0BaAlyZroms6hHkXyrsohjbawMvPnGPRZI75QC7OP5Kemfmw19qnK9OnWWaViEQX+CW5FykbcYEr7dxrSwHXQ6GcKrWB1S9+o9nD1+XsiaOily4aDGRVJLNGcUrjNXKu9IeXAi2v1TuFpSsGDxMSwWJwzH8Ss5MVYW3gcjhfwaP3JMBqseafnMk+luGNBOV0oS3JG+UV3eKVA3j19H5MGpjCgFTQfsZXqq+Him4CUULaHR3NthXlMY77jQKZOkqfFai6ygOAm3zgVeuh+Obml8bCgNj7ccewd8+lo/ftvG/8JuxxC2g/FauwNyIQiO1au7ygjT8K6Eex+QHT4qwl6gj+BYAnR+KSqO74RXad8ZCt4yKNDkNzS4xF2MbWle2d3/dR1cWkz/CsOvkOx4uud844uP7OvG2fW3cJJnNtwcUMoKA6FSsO2T9mX3Kj99wczrEUQSLwiFdgrT/X5Y1nSDr5RTRjq+mMnDNmfY+o1j/PlZKcPc7+wF8faX8SvozK2eAsQTckC1oR0Jh/kh9/yWZ4yb/WxqsnR1gNf1xuiqXAgzjyW6gisCAau5kUtQk=
    - secure: U46BSIOW9oGPvunRbmCtuE9fnZr+L1Sr1WG7xWIs52Y3I8lZhXSHrQ7fDuTK9jINrlVBGumh/kROiamnn8uK74p6sEW0T+Mrw2VHUrBdoTsjaXXT8wpxtI+R5W5fT5Z61P+4svLC/qIkrPs3GCor8sXCNEUY9my+T7/gmFjuwy+0wvyJYDm+FZLh0TRxsFOGLGXHQa0wmsa9TqunIex3GsosU4+3bz2F3BCBS0ZTcwTk64IrLRzAp9r2Hjfs2o7JkqYR46xbkALvxOMmFL3Gv0UXcch5WrP1MtxFFR9FRe3RLcNaJ2E+I/dbNRFYBuZ2/3BjlST632YSWDnSUsh3xC01SM2xCP7dVewqQ3JcdsNKTfnAPjcE3BZrPrn/pxGRWcESYPnblorlneMty3w8kRAgtDfIhAY4JPZEUYb9Noy8flRRvCl2gJz5w3f8cOrU1S9EqdwMU+NDMde3yFbOt1G3YdGFOGIhAE2XybsdHegdwHCMb5h/HhT3iQbUh3f457H92iwm1XrQiDn2nj5aXLjclqW21RZyWz9WV/QEfj/pLNyFNB4ccYY80EBpxh5MQLEajfTHcJ/iKVTpJ5ehP2+Val3/9PzIzSRcqHUewXnJHrBpnr76CSjV5iUjXaWV2RvJtIxfDXxZiQBmG7r7ekVe30Nc8Ce/Jji6ARAffQ4=
stages:
  - test
  - publish
jobs:
  include:
    - stage: test
      script: sbt +test
    - stage: publish
      script: sbt +publishSigned
      if: branch = develop
cache:
  directories:
    - "$HOME/.cache/coursier"
    - "$HOME/.ivy2/cache"
    - "$HOME/.sbt"
before_cache:
  - rm -fv $HOME/.ivy2/.sbt.ivy.lock
  - find $HOME/.ivy2/cache -name "ivydata-*.properties" -print -delete
  - find $HOME/.sbt        -name "*.lock"               -print -delete
